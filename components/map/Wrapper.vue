<template>
  <div
    id="viewport"
    ref="viewport"
  >
    <div
      id="map"
      ref="map"
    >
      <div id="markers">
        <template v-for="(marker, index) in markers">
          <v-tooltip
            :key="'marker-' + index"
            top
          >
            <template #activator="{ on, attrs }">
              <v-btn
                v-bind="attrs"
                fab
                small
                :style="{
                  left: marker.x + 'px',
                  top: marker.y + 'px',
                }"
                v-on="on"
                @click="clickHandler(marker, index)"
              >
                <v-icon dark>
                  {{ marker.icon }}
                </v-icon>
              </v-btn>
            </template>
            <span v-html="marker.tooltip" />
          </v-tooltip>
        </template>
      </div>
      <div id="layer-1">
        <StallsHotAirBalloon
          :style="{
            top: 500,
            left: 1150,
          }"
        />
      </div>
      <svg
        id="eilanden"
        height="499.7925mm"
        viewBox="0 0 1573.0713 1416.7346"
        width="554.9446mm"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <defs>
          <linearGradient
            id="linear-gradient"
            gradientTransform="matrix(1, 0, 0, 1, 0, 0)"
            gradientUnits="userSpaceOnUse"
            x1="469.9956"
            x2="469.9956"
            y1="730.1447"
            y2="788.8723"
          >
            <stop
              offset="0"
              stop-color="#fff"
            />
            <stop
              offset=".1529"
              stop-color="#e3eaef"
            />
            <stop
              offset=".3223"
              stop-color="#cddae2"
            />
            <stop
              offset=".5067"
              stop-color="#bdced9"
            />
            <stop
              offset=".7154"
              stop-color="#b3c7d4"
            />
            <stop
              offset="1"
              stop-color="#E3BF9C"
            />
          </linearGradient>
          <mask
            id="mask"
            height="131.76"
            maskUnits="userSpaceOnUse"
            width="184.08"
            x="378.7719"
            y="692.6385"
          >
            <image
              height="549"
              transform="translate(378.7719 692.6385) scale(.24)"
              width="767"
              xlink:href="~assets/map/1.png"
            />
          </mask>
          <linearGradient
            id="linear-gradient-2"
            gradientTransform="matrix(1, 0, 0, 1, 0, 0)"
            gradientUnits="userSpaceOnUse"
            x1="514.325"
            x2="514.325"
            y1="765.4408"
            y2="779.3748"
          >
            <stop
              offset="0"
              stop-color="#fff"
            />
            <stop
              offset="1"
              stop-color="#E3BF9C"
            />
          </linearGradient>
          <mask
            id="mask-1"
            height="99.84"
            maskUnits="userSpaceOnUse"
            width="89.52"
            x="469.412"
            y="717.4384"
          >
            <image
              height="416"
              transform="translate(469.412 717.4384) scale(.24)"
              width="373"
              xlink:href="~assets/map/2.png"
            />
          </mask>
        </defs>
        <g id="eiland_klein2">
          <path
            id="vulling"
            d="M397.3297,1120.144l14.1935-14.1935c2.8377-2.8377,4.4319-6.6864,4.4319-10.6995h0c0-8.3569,6.7746-15.1314,15.1314-15.1314h32.3194c8.3569,0,15.1314,6.7746,15.1314,15.1314v12.5165c0,4.0131,1.5942,7.8618,4.4319,10.6995l32.3194,32.3194c2.8377,2.8377,4.4319,6.6864,4.4319,10.6995v52.0657c0,4.0131-1.5942,7.8618-4.4319,10.6995l-27.8781,27.8781c-2.8377,2.8377-6.6864,4.4319-10.6995,4.4319h-46.0283c-8.3569,0-15.1314-6.7746-15.1314-15.1314v-29.0705c0-4.0131-1.5942-7.8618-4.4319-10.6995l-14.107-14.107c-2.8633-2.8633-4.4595-6.7547-4.4315-10.8039l.3173-46.0095c.0274-3.9769,1.6194-7.7831,4.4315-10.5952Z"
            style="fill: #E3BF9C"
          />
          <g
            id="strand-1"
            style="opacity: 0.15"
          >
            <path
              d="M463.4059,1080.1195c8.3568,0,15.1314,6.7745,15.1314,15.1314v12.5165c0,4.0131,1.5942,7.8618,4.4319,10.6995l32.3194,32.3194c2.8377,2.8376,4.4319,6.6864,4.4319,10.6995v52.0657c0,4.0131-1.5942,7.8618-4.4319,10.6995l-27.8781,27.8781c-2.8377,2.8377-6.6864,4.4319-10.6995,4.4319h-46.0283c-8.3569,0-15.1314-6.7745-15.1314-15.1314v-29.0705c0-4.0131-1.5942-7.8618-4.4319-10.6995l-14.1071-14.1071c-2.8633-2.8633-4.4594-6.7547-4.4315-10.8039l.3173-46.0095c.0274-3.9769,1.6194-7.783,4.4316-10.5952l14.1935-14.1935c2.8377-2.8376,4.4319-6.6864,4.4319-10.6995,0-8.3569,6.7746-15.1314,15.1314-15.1314h32.3194m0-14h-32.3194c-16.0631,0-29.1314,13.0683-29.1314,29.1314,0,.3022-.1177,.5864-.3314,.8l-14.1935,14.1935c-5.4486,5.4484-8.4786,12.6926-8.5317,20.3981l-.3173,46.0095c-.0534,7.7432,3.0562,15.3245,8.5317,20.7999l14.1071,14.1071c.2137,.2137,.3314,.4978,.3314,.8v29.0705c0,16.0631,13.0683,29.1314,29.1314,29.1314h46.0283c7.7814,0,15.0969-3.0302,20.5991-8.5325l27.8779-27.8779c5.5022-5.5024,8.5324-12.8179,8.5324-20.5991v-52.0657c0-7.7814-3.0302-15.097-8.5325-20.5991l-32.3193-32.3193c-.2137-.2137-.3314-.4979-.3314-.8v-12.5165c0-16.0631-13.0683-29.1314-29.1314-29.1314h0Z"
              style="fill: #FAE3CF"
            />
          </g>
        </g>
        <g id="eiland_klein1">
          <path
            id="vulling-2"
            d="M17.1712,112.7987l9.4776-9.4776c1.8948-1.8948,2.9594-4.4648,2.9594-7.1445h0c0-5.5802,4.5237-10.1039,10.1039-10.1039h21.581c5.5802,0,10.1039,4.5237,10.1039,10.1039v8.3578c0,2.6797,1.0645,5.2497,2.9594,7.1445l21.581,21.581c1.8948,1.8948,2.9594,4.4648,2.9594,7.1445v34.7664c0,2.6797-1.0645,5.2497-2.9594,7.1445l-18.6153,18.6153c-1.8948,1.8948-4.4648,2.9594-7.1445,2.9594h-30.7349c-5.5802,0-10.1039-4.5237-10.1039-10.1039v-19.4115c0-2.6797-1.0645-5.2497-2.9594-7.1445l-9.4198-9.4198c-1.9119-1.9119-2.9778-4.5104-2.9591-7.2142l.2119-30.7224c.0183-2.6555,1.0813-5.1971,2.9591-7.0748Z"
            style="fill: #E3BF9C"
          />
          <g
            id="strand-2"
            style="opacity: 0.15"
          >
            <path
              d="M61.293,86.0727c5.5802,0,10.1039,4.5237,10.1039,10.1039v8.3577c0,2.6798,1.0645,5.2497,2.9594,7.1446l21.5809,21.5809c1.8949,1.8949,2.9594,4.4648,2.9594,7.1445v34.7664c0,2.6797-1.0645,5.2497-2.9594,7.1445l-18.6153,18.6153c-1.8948,1.8949-4.4648,2.9594-7.1445,2.9594h-30.7349c-5.5802,0-10.1039-4.5237-10.1039-10.1039v-19.4115c0-2.6797-1.0645-5.2497-2.9594-7.1445l-9.4199-9.4198c-1.9119-1.912-2.9777-4.5104-2.9591-7.2142l.2119-30.7225c.0183-2.6555,1.0813-5.1971,2.9591-7.0748l9.4776-9.4776c1.8949-1.8949,2.9594-4.4648,2.9594-7.1445h0c0-5.5802,4.5237-10.1039,10.1039-10.1039h21.581m0-14h-21.581c-12.7295,0-23.186,9.9179-24.0465,22.4327l-8.3937,8.3937C2.7634,107.4077,.2564,113.4016,.2125,119.777L.0006,150.4994c-.0441,6.4071,2.529,12.6799,7.0593,17.2103l8.2787,8.2786v17.7978c0,13.2909,10.8129,24.1039,24.1039,24.1039h30.7349c6.4385,0,12.4915-2.5073,17.0442-7.06l18.6151-18.6152c4.5526-4.5526,7.0599-10.6056,7.0599-17.044v-34.7664c0-6.4384-2.5072-12.4914-7.0599-17.044l-20.4398-20.4398v-6.7439c0-13.2909-10.8129-24.1039-24.1039-24.1039h0Z"
              style="fill: #FAE3CF"
            />
          </g>
        </g>
        <g id="eiland_medium1">
          <g id="vulling-3">
            <path
              d="M1145.859,1400.9789c0-6.436-2.5567-12.6084-7.1076-17.1593l-28.9973-28.9973c-4.5509-4.5509-7.1076-10.7233-7.1076-17.1593v-70.4972c0-3.8617,.9216-7.6676,2.6882-11.1015l10.6302-20.6625c1.7666-3.4339,2.6882-7.2398,2.6882-11.1015l-.2876-31.5869,57.6189-57.6189c4.8009-4.8009,11.3124-7.4981,18.1019-7.4981h120.7225c6.7895,0,13.301-2.6971,18.1019-7.4981l21.5732-21.5732c4.8009-4.8009,11.3124-7.4981,18.1019-7.4981h90.9532c6.7895,0,13.301,2.6971,18.1019,7.4981l44.0546,44.0546c4.8009,4.8009,11.3124,7.4981,18.1019,7.4981h15.2736v42.6356l-.4896,25.31c0,6.436-2.5567,12.6084-7.1076,17.1593l-16.7538,16.7538c-4.5509,4.5509-10.7233,7.1076-17.1593,7.1076h-66.6099c-6.436,0-12.6084,2.5567-17.1593,7.1076l-18.3382,18.3383c-4.5509,4.5509-7.1076,10.7233-7.1076,17.1593v12.7382c0,6.436-2.5567,12.6084-7.1076,17.1593l-75.0563,71.1352-180.3231-1.7029Z"
              style="fill: #E3BF9C"
            />
          </g>
          <g
            id="strand-3"
            style="opacity: 0.15"
          >
            <path
              d="M1463.5392,1091.0271c6.7896,0,13.301,2.6971,18.1019,7.4981l44.0547,44.0546c4.8009,4.801,11.3124,7.4981,18.1019,7.4981h15.2736v42.6355l-.4896,25.31c0,6.4359-2.5566,12.6083-7.1075,17.1593l-16.7538,16.7538c-4.551,4.551-10.7234,7.1076-17.1593,7.1076h-66.6099c-6.436,0-12.6084,2.5566-17.1593,7.1076l-18.3383,18.3383c-4.5509,4.5509-7.1075,10.7233-7.1075,17.1592v12.7383c0,6.436-2.5568,12.6084-7.1077,17.1593l-75.0563,71.1352-180.3232-1.703c0-6.4359-2.5566-12.6083-7.1075-17.1592l-28.9973-28.9973c-4.5509-4.551-7.1075-10.7234-7.1075-17.1593v-70.4973c0-3.8617,.9216-7.6676,2.6882-11.1015l10.6302-20.6625c1.7666-3.4339,2.6882-7.2398,2.6882-11.1016l-.2876-31.5869,57.6189-57.6188c4.8009-4.801,11.3124-7.4981,18.1019-7.4981h120.7226c6.7894,0,13.3009-2.6972,18.1019-7.4981l21.5731-21.5732c4.801-4.801,11.3124-7.4981,18.1019-7.4981h90.9532m0-14h-90.9532c-10.5774,0-20.5217,4.1191-28.0013,11.5986l-21.5732,21.5733c-2.1909,2.1909-5.104,3.3975-8.2024,3.3975h-120.7226c-10.5776,0-20.5221,4.1192-28.0015,11.5987l-57.6188,57.6187-4.1534,4.1534,.0535,5.8736,.2869,31.5118c-.0084,1.6089-.4011,3.2137-1.1372,4.6445l-10.6302,20.6625c-2.7733,5.3908-4.2391,11.4443-4.2391,17.5062v70.4973c0,10.2214,3.9803,19.8311,11.2079,27.0587l28.9976,28.9974c1.9391,1.9391,3.007,4.5172,3.007,7.2596v13.8683l13.8679,.1311,180.3231,1.703,5.6567,.0533,4.1061-3.8914,75.0563-71.1353,.1361-.129,.1328-.1328c7.2277-7.2277,11.2081-16.8373,11.2081-27.0588v-12.7383c0-2.7424,1.0679-5.3205,3.007-7.2597l18.3383-18.3383c1.9392-1.9392,4.5175-3.0071,7.2599-3.0071h66.6099c10.2214,0,19.8311-3.9804,27.0587-11.2079l16.7539-16.754c7.1924-7.1924,11.1691-16.7442,11.2078-26.9097l.4872-25.1884,.0027-.1354v-56.7709h-29.2736c-3.0985,0-6.0115-1.2065-8.2024-3.3975l-44.0548-44.0547c-7.4791-7.4794-17.4236-11.5986-28.0013-11.5986h0Z"
              style="fill: #FAE3CF"
            />
          </g>
        </g>
        <g id="eiland_groot2">
          <path
            id="vulling-4"
            d="M1208.1589,14c6.7895,0,32.8454,60.5093,37.6463,65.3102l5.174,79.8835c4.8009,4.8009,11.3124,7.4981,18.1019,7.4981h147.2349c6.7895,0,13.301,2.6971,18.1019,7.4981l12.4541,12.4541c4.8009,4.8009,7.4981,11.3124,7.4981,18.1019v194.0305c0,6.7895-2.6971,13.301-7.4981,18.1019l-12.4541,12.4541c-4.8009,4.8009-11.3124,7.4981-18.1019,7.4981h-88.7305c-6.7895,0-13.301,2.6971-18.1019,7.4981l-27.6569,27.6569c-4.8009,4.8009-11.3124,7.4981-18.1019,7.4981h-27.3314c-14.1385,0-25.6,11.4615-25.6,25.6v55.0844c0,6.7895-2.6971,13.301-7.4981,18.1019l-30.1548,30.1548c-4.8009,4.8009-7.4981,11.3124-7.4981,18.1019v67.3017c0,6.7895,2.6971,13.301,7.4981,18.1019l21.2627,21.2627c4.8009,4.8009,7.4981,11.3124,7.4981,18.1019v22.324c0,6.7895-2.6971,13.301-7.4981,18.1019l-38.8358,38.8358c-4.8009,4.8009-11.3124,7.4981-18.1019,7.4981h-93.2621c-6.7895,0-13.301-2.6971-18.1019-7.4981l-38.8358-38.8358c-4.8009-4.8009-7.4981-11.3124-7.4981-18.1019v-72.2775c0-6.7895,2.6971-13.301,7.4981-18.1019l21.2627-21.2627c4.8009-4.8009,7.4981-11.3124,7.4981-18.1019v-67.3017c0-6.7895-2.6971-13.301-7.4981-18.1019l-30.1548-30.1548c-4.8009-4.8009-7.4981-11.3124-7.4981-18.1019v-111.4206c0-14.1385-11.4615-25.6-25.6-25.6h-27.3314c-6.7895,0-13.301-2.6971-18.1019-7.4981l-27.6569-27.6569c-4.8009-4.8009-11.3124-7.4981-18.1019-7.4981h-94.9049c-6.7895,0-13.301-2.6971-18.1019-7.4981l-12.4541-12.4541c-4.8009-4.8009-7.4981-11.3124-7.4981-18.1019V98.4562c0-6.7895,2.6971-13.301,7.4981-18.1019l12.4541-12.4541c4.8009-4.8009,11.3124-7.4981,18.1019-7.4981h36.4005c6.7895,0,13.301-2.6971,18.1019-7.4981l27.6569-27.6569c4.8009-4.8009,11.3124-7.4981,18.1019-7.4981h27.3314l321.388-3.749Z"
            style="fill: #E3BF9C"
          />
          <g
            id="strand-4"
            style="opacity: 0.15"
          >
            <path
              d="M1208.1588,14c6.7896,0,32.8455,60.5092,37.6464,65.3102l5.1739,79.8836c4.8011,4.8009,11.3124,7.498,18.102,7.498h147.2349c6.7896,0,13.301,2.6972,18.1019,7.4981l12.4543,12.4541c4.8008,4.8009,7.4979,11.3124,7.4979,18.1019v194.0305c0,6.7896-2.6971,13.3011-7.4979,18.102l-12.4543,12.4541c-4.8009,4.8009-11.3124,7.498-18.1019,7.498h-88.7305c-6.7896,0-13.3009,2.6972-18.1019,7.4981l-27.6569,27.6569c-4.8009,4.8009-11.3124,7.498-18.102,7.498h-27.3315c-14.1384,0-25.5999,11.4615-25.5999,25.6v55.0844c0,6.7896-2.6972,13.3009-7.4981,18.1019l-30.1548,30.1548c-4.8009,4.8009-7.4981,11.3124-7.4981,18.102v67.3016c0,6.7896,2.6972,13.3011,7.4981,18.102l21.2627,21.2627c4.8009,4.8009,7.498,11.3124,7.498,18.102v22.3239c0,6.7896-2.6971,13.3011-7.498,18.102l-38.8359,38.8357c-4.8008,4.8011-11.3123,7.4981-18.1019,7.4981h-93.2621c-6.7894,0-13.3009-2.697-18.1019-7.4981l-38.8359-38.8357c-4.8009-4.8009-7.498-11.3124-7.498-18.102v-72.2775c0-6.7895,2.6971-13.3009,7.498-18.1019l21.2627-21.2627c4.8009-4.8009,7.4981-11.3124,7.4981-18.102v-67.3016c0-6.7896-2.6972-13.3011-7.4981-18.102l-30.1547-30.1548c-4.8011-4.8009-7.4981-11.3124-7.4981-18.1019v-111.4207c0-14.1384-11.4615-25.6-25.6-25.6h-27.3315c-6.7894,0-13.3009-2.6971-18.102-7.498l-27.6569-27.6569c-4.8008-4.8009-11.3123-7.4981-18.1019-7.4981h-94.9049c-6.7895,0-13.3009-2.6971-18.1019-7.498l-12.4541-12.4541c-4.8009-4.8009-7.4981-11.3124-7.4981-18.102V98.4561c0-6.7895,2.6972-13.3009,7.4981-18.1019l12.4541-12.4541c4.8009-4.8009,11.3124-7.4981,18.1019-7.4981h36.4005c6.7896,0,13.3009-2.6971,18.1019-7.498l27.6569-27.657c4.801-4.8009,11.3124-7.498,18.102-7.498h27.3315l321.3879-3.7491m0-14h-.0816l-.0817,.0009-321.3079,3.7481h-27.2482c-10.5776,0-20.5221,4.119-28.0015,11.5985l-27.6569,27.657c-2.1909,2.1909-5.1039,3.3975-8.2024,3.3975h-36.4005c-10.5775,0-20.5219,4.1192-28.0013,11.5987l-12.4542,12.4541c-7.4795,7.4795-11.5987,17.4239-11.5987,28.0013v194.0305c0,10.5776,4.1192,20.522,11.5987,28.0015l12.4542,12.4541c7.4793,7.4795,17.4237,11.5985,28.0013,11.5985h94.9049c3.0984,0,6.0114,1.2065,8.2023,3.3975l27.657,27.6571c7.4796,7.4795,17.424,11.5985,28.0015,11.5985h27.3315c6.3963,0,11.6,5.2037,11.6,11.6v111.4207c0,10.5776,4.1191,20.5221,11.5988,28.0015l30.1545,30.1547c2.1909,2.1911,3.3976,5.104,3.3976,8.2025v67.3016c0,3.0985-1.2067,6.0115-3.3976,8.2025l-21.2626,21.2627c-7.4795,7.4793-11.5986,17.4237-11.5986,28.0013v72.2775c0,10.5776,4.1191,20.5221,11.5986,28.0015l38.8358,38.8358c7.4792,7.4794,17.4238,11.5986,28.0013,11.5986h93.2621c10.5779,0,20.5224-4.1192,28.0016-11.5989l38.8356-38.8354c7.4794-7.4793,11.5985-17.4239,11.5985-28.0015v-22.3239c0-10.5776-4.1191-20.5222-11.5985-28.0015l-21.2627-21.2627c-2.1909-2.1911-3.3976-5.104-3.3976-8.2025v-67.3016c0-3.0985,1.2067-6.0115,3.3976-8.2025l30.1548-30.1548c7.4795-7.4795,11.5987-17.4239,11.5987-28.0013v-55.0844c0-6.3963,5.2037-11.6,11.5999-11.6h27.3315c10.5776,0,20.5222-4.1191,28.0015-11.5985l27.6568-27.6569c2.191-2.1909,5.1041-3.3976,8.2025-3.3976h88.7305c10.5775,0,20.5221-4.1191,28.0015-11.5985l12.4542-12.454c7.4795-7.4797,11.5985-17.4241,11.5985-28.0016V204.7459c0-10.5773-4.119-20.5217-11.5984-28.0012l-12.4543-12.4544c-7.4795-7.4793-17.424-11.5985-28.0015-11.5985h-147.2349c-1.5911,0-3.1331-.3181-4.5537-.9243l-4.7515-73.3621-.3409-5.2644-3.1282-3.1281c-1.752-2.7355-6.3775-12.0329-10.129-19.574-4.7672-9.5824-10.1705-20.4433-15.0046-29.052-6.8044-12.1176-12.8198-21.3868-23.0143-21.3868h0Z"
              style="fill: #FAE3CF"
            />
          </g>
        </g>
        <g id="eiland_groot1">
          <g id="vulling-5">
            <path
              d="M633.2544,821.886v-12.7382c0-6.436,2.5567-12.6083,7.1076-17.1593l18.3382-18.3383c4.5509-4.5509,10.7233-7.1076,17.1593-7.1076h66.6099c6.436,0,12.6084-2.5567,17.1593-7.1076l16.7538-16.7538c4.5509-4.5509,7.1076-10.7233,7.1076-17.1593v-167.8675c0-6.436-2.5567-12.6084-7.1076-17.1593l-30.0776-30.0776c-4.5509-4.5509-10.7233-7.1076-17.1593-7.1076h-192.4304c-6.436,0-12.6084,2.5567-17.1593,7.1076l-15.9976,15.9976c-4.5509,4.5509-10.7233,7.1076-17.1593,7.1076h-28.0427c-6.436,0-12.6084,2.5567-17.1593,7.1076l-30.8519,30.8519c-4.5509,4.5509-7.1076,10.7233-7.1076,17.1593v127.372c0,3.8617-.9216,7.6676-2.6882,11.1015l-10.6302,20.6625c-1.7666,3.4339-2.6882,7.2398-2.6882,11.1015v70.4972c0,6.436,2.5567,12.6084,7.1076,17.1593l28.9973,28.9973c4.5509,4.5509,7.1076,10.7233,7.1076,17.1593v38.5635c0,5.4572,1.8394,10.7551,5.2212,15.0381l8.8664,11.2292c4.602,5.8284,11.6194,9.2288,19.0457,9.2288h24.4424c3.3307,0,6.6257,.6856,9.68,2.0143l33.5309,14.5861c2.7904,1.2138,5.3276,2.9416,7.4793,5.0934l29.9981,29.9981c4.5509,4.5509,10.7233,7.1076,17.1593,7.1076h26.2118c6.436,0,12.6084,2.5567,17.1593,7.1076l6.842,6.842c4.5509,4.5509,7.1076,10.7233,7.1076,17.1593v40.6249c0,6.436,2.5567,12.6084,7.1076,17.1593l20.7734,20.7734c4.5509,4.5509,10.7233,7.1076,17.1593,7.1076h35.6273c6.436,0,12.6084-2.5567,17.1593-7.1076l8.4646-8.4646c4.5509-4.5509,7.1076-10.7233,7.1076-17.1593v-49.8222c0-6.436,2.5567-12.6084,7.1076-17.1593l4.4056-4.4056c4.5509-4.5509,7.1076-10.7233,7.1076-17.1593v-40.787c0-6.436-2.5567-12.6084-7.1076-17.1593l-49.6476-49.6476c-4.5509-4.5509-10.7233-7.1076-17.1593-7.1076h-27.6268c-6.436,0-12.6083,2.5567-17.1593,7.1076l-18.8686,18.8686c-4.5509,4.5509-10.7233,7.1076-17.1593,7.1076h-36.1308c-13.4022,0-24.2669-10.8647-24.2669-24.2669h0c0-6.436,2.5567-12.6084,7.1076-17.1593l58.9581-58.958c4.5509-4.5509,7.1076-10.7233,7.1076-17.1593Z"
              style="fill: #E3BF9C"
            />
          </g>
          <g
            id="strand-5"
            style="opacity: 0.15"
          >
            <path
              d="M729.1454,503.3099c6.436,0,12.6083,2.5567,17.1593,7.1077l30.0775,30.0776c4.551,4.551,7.1077,10.7233,7.1077,17.1593v167.8674c0,6.436-2.5567,12.6085-7.1077,17.1593l-16.7537,16.7538c-4.551,4.5509-10.7233,7.1075-17.1593,7.1075h-66.6099c-6.4359,0-12.6083,2.5568-17.1592,7.1077l-18.3382,18.3382c-4.5509,4.551-7.1077,10.7234-7.1077,17.1593v12.7381c0,6.436-2.5567,12.6083-7.1075,17.1594l-58.9581,58.958c-4.5509,4.5509-7.1075,10.7233-7.1075,17.1593,0,13.4022,10.8647,24.2669,24.2669,24.2669h36.1308c6.436,0,12.6083-2.5566,17.1593-7.1075l18.8685-18.8686c4.5509-4.551,10.7234-7.1077,17.1592-7.1077h27.6269c6.436,0,12.6083,2.5568,17.1592,7.1077l49.6477,49.6477c4.5509,4.5509,7.1075,10.7232,7.1075,17.1592v40.787c0,6.4359-2.5567,12.6083-7.1075,17.1592l-4.4055,4.4057c-4.551,4.5509-7.1077,10.7232-7.1077,17.1592v49.8222c0,6.4359-2.5567,12.6083-7.1076,17.1592l-8.4645,8.4645c-4.551,4.551-10.7234,7.1077-17.1593,7.1077h-35.6272c-6.436,0-12.6085-2.5567-17.1593-7.1075l-20.7734-20.7735c-4.5509-4.5508-7.1076-10.7233-7.1076-17.1592v-40.6249c0-6.436-2.5567-12.6085-7.1077-17.1594l-6.842-6.842c-4.5509-4.551-10.7233-7.1077-17.1592-7.1077h-26.2119c-6.4359,0-12.6083-2.5567-17.1592-7.1075l-29.9981-29.9981c-2.1516-2.1517-4.6889-3.8795-7.4792-5.0934l-33.531-14.5861c-3.0542-1.3286-6.3492-2.0142-9.68-2.0142h-24.4424c-7.4262,0-14.4436-3.4003-19.0457-9.2288l-8.8663-11.2292c-3.3818-4.283-5.2212-9.5809-5.2212-15.0381v-38.5634c0-6.436-2.5567-12.6083-7.1077-17.1594l-28.9972-28.9972c-4.551-4.551-7.1077-10.7233-7.1077-17.1594v-70.4972c0-3.8617,.9217-7.6675,2.6882-11.1014l10.6302-20.6625c1.7666-3.4339,2.6882-7.2398,2.6882-11.1014v-127.372c0-6.436,2.5567-12.6083,7.1076-17.1593l30.8519-30.8518c4.5509-4.551,10.7233-7.1077,17.1593-7.1077h28.0427c6.4359,0,12.6083-2.5567,17.1592-7.1075l15.9975-15.9976c4.5509-4.551,10.7233-7.1077,17.1593-7.1077h192.4303m0-14h-192.4303c-10.2217,0-19.8313,3.9806-27.059,11.2083l-15.9973,15.9975c-1.9392,1.9391-4.5175,3.007-7.2598,3.007h-28.0427c-10.2217,0-19.8313,3.9806-27.059,11.2083l-30.8517,30.8515c-7.2277,7.2279-11.2081,16.8376-11.2081,27.0589v127.372c0,1.6263-.3933,3.2505-1.1374,4.697l-10.6301,20.6623c-2.7733,5.3908-4.2391,11.4442-4.2391,17.5061v70.4972c0,10.2214,3.9804,19.8311,11.2082,27.0588l28.9972,28.9973c1.9391,1.9392,3.0071,4.5175,3.0071,7.2599v38.5634c0,8.5678,2.924,16.9896,8.2335,23.7139l8.8663,11.2291c7.3027,9.2488,18.2494,14.5531,30.0334,14.5531h24.4424c1.4177,0,2.7956,.2868,4.0956,.8522l33.5309,14.586c1.1854,.5158,2.2501,1.2408,3.1643,2.1549l29.9981,29.9981c7.2275,7.2277,16.8372,11.2081,27.0587,11.2081h26.2119c2.7423,0,5.3206,1.0679,7.2596,3.007l6.8422,6.8422c1.9392,1.9392,3.0071,4.5174,3.0071,7.2599v40.6249c0,10.2214,3.9804,19.8311,11.2081,27.0587l20.7734,20.7734c7.2275,7.2277,16.8372,11.2081,27.0588,11.2081h35.6272c10.2214,0,19.8311-3.9805,27.0588-11.2083l8.4645-8.4645c7.2277-7.2275,11.2081-16.8372,11.2081-27.0587v-49.8222c0-2.7424,1.0679-5.3206,3.007-7.2596l4.4059-4.406c7.2274-7.2274,11.2079-16.8371,11.2079-27.0585v-40.787c0-10.2214-3.9804-19.8311-11.2081-27.0587l-49.6477-49.6476c-7.2277-7.2278-16.8373-11.2083-27.0587-11.2083h-27.6269c-10.2216,0-19.8312,3.9806-27.0589,11.2084l-18.8683,18.8684c-1.9392,1.939-4.5175,3.007-7.2599,3.007h-36.1308c-5.6612,0-10.2669-4.6057-10.2669-10.2669,0-2.7424,1.0679-5.3207,3.007-7.2599l58.9581-58.9579c7.2277-7.2279,11.2081-16.8375,11.2081-27.0589v-12.7381c0-2.7423,1.068-5.3206,3.0073-7.26l18.338-18.3381c1.9392-1.9391,4.5174-3.0071,7.2598-3.0071h66.6099c10.2213,0,19.831-3.9804,27.0587-11.2079l16.7539-16.754c7.2275-7.2274,11.2081-16.8371,11.2081-27.0588v-167.8674c0-10.2215-3.9805-19.8311-11.2083-27.0588l-30.0775-30.0776c-7.2277-7.2278-16.8373-11.2082-27.0588-11.2082h0Z"
              style="fill: #FAE3CF"
            />
          </g>
          <g id="berg">
            <path
              d="M407.5066,787.1274l40.9229-47.5262c5.1624-5.9954,12.7719-9.4564,20.791-9.4564h0c7.8454,0,15.3078,3.3133,20.4674,9.0876l42.7968,47.8951h-124.9781Z"
              style="fill: url(#linear-gradient)"
            />
            <g style="mask: url(#mask)">
              <path
                d="M407.5066,787.1274l40.9229-47.5262c5.1624-5.9954,12.7719-9.4564,20.791-9.4564h0c7.8454,0,15.3078,3.3133,20.4674,9.0876l42.7968,47.8951h-124.9781Z"
                style="fill: #FAE3CF"
              />
            </g>
          </g>
          <g id="boom">
            <g>
              <polygon
                points="514.325 754.4848 507.0293 780.0498 521.6207 780.0498 514.325 754.4848"
                style="fill: url(#linear-gradient-2)"
              />
              <g style="mask: url(#mask-1)">
                <polygon
                  points="514.325 754.4848 507.0293 780.0498 521.6207 780.0498 514.325 754.4848"
                  style="fill: #FAE3CF"
                />
              </g>
            </g>
            <rect
              height="1.5609"
              style="fill: #231f20"
              width="1.5609"
              x="513.4342"
              y="780.0498"
            />
          </g>
        </g>
      </svg>
    </div>

    <div
      id="map-controls"
      class="d-flex flex-row align-center pa-8"
    >
      <v-btn
        class="v-btn--wishlist"
        fab
        small
        @click="$bus.$emit('toggle-wishlist')"
      >
        <v-icon
          :size="18"
          :wishlist-count="wishlist.length"
        >
          $vuetify.icons.heart
        </v-icon>
      </v-btn>
      <v-btn
        class="ml-3"
        fab
        small
        @click="zoomOut"
      >
        <v-icon :size="18">
          fa-minus
        </v-icon>
      </v-btn>
      <v-btn
        class="ml-3"
        fab
        small
        @click="zoomIn"
      >
        <v-icon :size="18">
          fa-plus
        </v-icon>
      </v-btn>
    </div>
  </div>
</template>

<script>
import Panzoom from '@panzoom/panzoom'
import { mapState } from 'vuex'

export default {
  data () {
    return {
      panzoom: undefined,
      markers: [
        { x: 1370, y: 1010, icon: 'fa-gamepad', route: '/games/flappy-bird', tooltip: this.$t('flappyBird'), categoryId: undefined },
        { x: 800, y: 800, icon: 'fa-gamepad', route: '/games/stick-hero', tooltip: this.$t('stickHero'), categoryId: undefined }
      ]
    }
  },
  computed: {
    ...mapState({
      categories: state => state.market.categories,
      wishlist: state => state.wishlist.wishlist
    })
  },
  mounted () {
    const { viewport, map } = this.$refs
    this.panzoom = Panzoom(map, {
      minScale: 0.6
    })

    // Allow zooming with wheel
    viewport.addEventListener('wheel', (e) => {
      this.panzoom.zoomWithWheel(e)
    })

    // Add markers for each category
    this.categories.forEach((category) => {
      this.markers.push({
        x: Math.floor(Math.random() * 2000) + 1,
        y: Math.floor(Math.random() * 2000) + 1,
        icon: 'fa-bag-shopping',
        categoryId: category.category_id,
        tooltip: category.languages[this.$i18n.locale].name
      })
    })
  },
  methods: {
    zoomIn () {
      this.panzoom.zoomIn()
    },
    zoomOut () {
      this.panzoom.zoomOut()
    },
    clickHandler (marker) {
      if (marker.route) { return this.$router.push(marker.route) }

      this.$bus.$emit('toggle-product-gallery', marker.categoryId)
    }
  }
}
</script>

<style lang="scss">

#viewport {
  background: var(--v-water);
  height: 100vh;
  margin: 0;
  width: 100%;
}

#map {
  overflow: visible;

  svg {
    contain: paint;
  }
}

#layer-1 {
  left: 0;
  position: absolute;
  top: 0;
  z-index: 1;
}

#markers {
  left: 0;
  position: absolute;
  top: 0;
  z-index: 1;

  .marker {
    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 8%) !important;
    position: absolute;
  }
}

#map-controls {
  bottom: 0;
  position: absolute;
  right: 0;
  z-index: 1;

  .v-btn {
    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 8%);

    &--wishlist {
      .v-icon {
        &::before {
          background-color: var(--v-primary-base);
          border-radius: 50%;
          color: #fff;
          content: attr(wishlist-count);
          font-size: 0.75rem;
          height: 20px;
          left: 12px;
          line-height: 20px;
          position: absolute;
          text-align: center;
          top: -12px;
          width: 20px;
        }
      }
    }
  }
}

.BD {
  fill: #a8622f;
}
.BE {
  fill: #e5883d;
}
.BF {
  fill: #fff;
}
.BG {
  fill: none;
}
.BH {
  fill: #1e7d61;
}
.BI {
  fill: #292309;
}
.BJ {
  fill: #92c6db;
}
.BK {
  fill: #db3825;
}
.BL {
  fill: #fbfff4;
}
.BM {
  fill: #feb900;
}
.BN {
  fill: #183c32;
}
.BO {
  fill: #5c3c00;
}
.BP {
  stroke-linecap: round;
}
.BQ {
  stroke-miterlimit: 10;
}
.BR {
  fill: #5a8da2;
}
.BS {
  stroke-linejoin: round;
}
.BT {
  fill: #003866;
}
.BU {
  fill: #ffbfbf;
}
.BV {
  fill: #ffd339;
}
.BW {
  fill: #f7bd5a;
}
.BX {
  fill: #dceff7;
}
.BY {
  stroke: #000;
}
.BZ {
  fill: #342f69;
}
.Ba {
  stroke-width: 0.242;
}
.Bb {
  fill: #8a5b00;
}
.Bc {
  fill: #196951;
}
.Bd {
  fill: #ee5b4a;
}
.Be {
  fill: #733c41;
}
.Bf {
  fill: #b32e1e;
}
.Bg {
  fill: #5761a9;
}
.Bh {
  stroke-width: 1.068;
}
.Bi {
  stroke: #fff;
}
.Bj {
  stroke: #92c6db;
}
.Bk {
  stroke-width: 2;
}
.Bl {
  stroke: #fbfff4;
}
.Bm {
  fill: #37326a;
}
.Bn {
  fill: #dda1ab;
}
.Bo {
  fill: #a1919e;
}
.Bp {
  fill: #c99300;
}
.Bq {
  fill: #672f3a;
}
.Br {
  fill: #f65583;
}
.Bs {
  stroke: #183c32;
}
.Bt {
  stroke: #4e479e;
}
.Bu {
  fill: #4e479e;
}
.Bv {
  fill: #fef9f6;
}
.Bw {
  fill: #fbffff;
}
.Bx {
  stroke: #5c3c00;
}
.By {
  stroke-width: 20;
}
.Bz {
  fill: #aed6e8;
}
.CA {
  stroke-width: 0.25;
}
.CB {
  fill: #c7d7f8;
}
.CC {
  stroke-width: 2.428;
}
.CD {
  stroke-width: 0.474;
}
.CE {
  stroke: #37326a;
}
.CF {
  fill: #8dc0d6;
}
.CG {
  stroke-width: 2.324;
}
.CH {
  stroke-width: 0.29;
}
.CI {
  stroke: #db3825;
}
.CJ {
  stroke-width: 3.448;
}
.CK {
  stroke-width: 0.324;
}
.CL {
  stroke-linejoin: bevel;
}
.CM {
  stroke-width: 0.741;
}
.CN {
  stroke-width: 0.439;
}
.CO {
  stroke-width: 1.15;
}

#elfski {
  animation-duration: 3s;
  animation-iteration-count: infinite;
  animation-name: elfski;
  animation-timing-function: ease-in-out;
  transform-box: fill-box;
  transform-origin: 0 0;
}

#joystick {
  animation-direction: alternate;
  animation-duration: 3s;
  animation-iteration-count: infinite;
  animation-name: joystick;
  animation-timing-function: ease-in-out;
  transform-box: fill-box;
  transform-origin: center 85px;
}

#walking-polar-bear {
  animation-direction: alternate;
  animation-duration: 10s;
  animation-iteration-count: infinite;
  animation-name: walking-polar-bear;
  transform-box: fill-box;
}

.gondola {
  animation-direction: alternate;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-name: swing;
  animation-timing-function: ease-in-out;
  transform-box: fill-box;
  transform-origin: center -20px;
}

@for $i from 1 through 2 {
  .gondola:nth-of-type(#{$i}) {
    animation-delay: -#{random(5)}s;
  }
}
</style>
